{% extends "webapp/base.html" %}
{% load static %}
{% block content %}
<div class="container"></div>
	<div class="row justify-content-center mt-5">
		<div class="col-md-6">
			<div class="card shadow-sm">
				<div class="card-body">
					<h3 class="card-title mb-3">Sign in</h3>

					{% if messages %}
						{% for message in messages %}
							<div class="alert alert-{{ message.tags|default:"info" }}" role="alert">{{ message }}</div>
						{% endfor %}
					{% endif %}

					{% if form.non_field_errors %}
						<div class="alert alert-danger" role="alert">
							{% for err in form.non_field_errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
						</div>
					{% endif %}

					<form method="post" action="{% url 'login' %}">
						{% csrf_token %}

						<div class="mb-3">
							<label for="{{ form.username.id_for_label }}" class="form-label">Username</label>
							<input
								type="text"
								name="{{ form.username.html_name }}"
								id="{{ form.username.id_for_label }}"
								value="{{ form.username.value|default_if_none:'' }}"
								class="form-control{% if form.username.errors %} is-invalid{% endif %}">
							{% if form.username.errors %}
								<div class="invalid-feedback">
									{% for err in form.username.errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
								</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label for="{{ form.password.id_for_label }}" class="form-label">Password</label>
							<input
								type="password"
								name="{{ form.password.html_name }}"
								id="{{ form.password.id_for_label }}"
								class="form-control{% if form.password.errors %} is-invalid{% endif %}">
							{% if form.password.errors %}
								<div class="invalid-feedback">
									{% for err in form.password.errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
								</div>
							{% endif %}
						</div>

						{% if next %}
							<input type="hidden" name="next" value="{{ next }}">
						{% endif %}

						<button type="submit" class="btn btn-primary">Log in</button>
					</form>

					<p class="mt-3 mb-0 text-muted">Don't have an account? <a href="{% url 'signup' %}">Sign up</a></p>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
